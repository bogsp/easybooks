{"version":3,"sources":["src/app/auth/auth.page.html","src/app/auth/auth-routing.module.ts","src/app/auth/auth.module.ts","src/app/auth/auth.page.scss","src/app/auth/auth.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Easy Books</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col size-md=\\\"4\\\" offset-md=\\\"4\\\">\\n        <div class=\\\"ion-padding\\\"></div>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col size-md=\\\"4\\\" offset-md=\\\"4\\\">\\n        <ion-card>\\n          <ion-card-header>\\n            <ion-card-title class=\\\"ion-padding\\\">\\n              {{ isLoginMode ? 'Log into your account.' : 'Register as a new user.' }}\\n            </ion-card-title>\\n          </ion-card-header>\\n\\n          <ion-card-content>\\n            <form [formGroup]=\\\"form\\\">\\n              <ion-grid>\\n                <ion-row>\\n                  <ion-col>\\n                    <ion-item>\\n                      <ion-label position=\\\"floating\\\">Email*</ion-label>\\n                      <ion-input type=\\\"email\\\" autocomplete formControlName=\\\"email\\\"></ion-input>\\n                    </ion-item>\\n                  </ion-col>\\n                </ion-row>\\n                <ion-row>\\n                  <ion-col>\\n                    <ion-item>\\n                      <ion-label position=\\\"floating\\\">Password*</ion-label>\\n                      <ion-input type=\\\"password\\\" autocomplete formControlName=\\\"password\\\"></ion-input>\\n                    </ion-item>\\n                  </ion-col>\\n                </ion-row>\\n                <ion-row>\\n                  <ion-col>\\n                    <div class=\\\"ion-padding\\\">\\n                      <ion-button (click)=\\\"submit()\\\">{{ isLoginMode ? 'Login' : 'Signup' }}</ion-button>\\n                      &nbsp;\\n                      <ion-button (click)=\\\"toggleLogin()\\\" fill=\\\"clear\\\" color=\\\"warning\\\">\\n                        {{ isLoginMode ? 'Register' : 'Sign In' }}\\n                      </ion-button>\\n                    </div>\\n                  </ion-col>\\n                </ion-row>\\n              </ion-grid>\\n            </form>\\n          </ion-card-content>\\n        </ion-card>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AuthPage } from './auth.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AuthPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AuthPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\n\nimport { AuthPageRoutingModule } from './auth-routing.module';\n\nimport { AuthPage } from './auth.page';\n\n@NgModule({\n  imports: [\n    SharedModule,\n    AuthPageRoutingModule\n  ],\n  declarations: [AuthPage]\n})\nexport class AuthPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2F1dGgvYXV0aC5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { LoadingController, AlertController } from '@ionic/angular';\nimport { map } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { SubSink } from 'subsink';\n\nimport { AppState } from '../store';\nimport { AuthService } from '../store';\n\n@Component({\n  selector: 'app-auth',\n  templateUrl: './auth.page.html',\n  styleUrls: ['./auth.page.scss'],\n})\nexport class AuthPage implements OnInit, OnDestroy {\n  private subs = new SubSink();\n  form: FormGroup;\n  isAuth: boolean;\n  hasError: boolean;\n  isLoading: boolean;\n  isLoginMode = true;\n\n  constructor(\n    private store: Store<AppState>,\n    private authService: AuthService,\n    public loadingController: LoadingController,\n    public alertController: AlertController\n  ) { }\n\n  ngOnInit() {\n    this.form = new FormGroup({\n      email: new FormControl(null, {\n        updateOn: 'blur',\n        validators: [\n          Validators.required,\n          Validators.email\n        ]\n      }),\n      password: new FormControl(null, {\n        updateOn: 'blur',\n        validators: [\n          Validators.required,\n          Validators.minLength(6)\n        ]\n      })\n    });\n\n    this.subs.add(\n      this.store.select('auth')\n        .pipe(map(state => this.isAuth = state.isAuth))\n        .subscribe(isAuth => {\n          this.isAuth = isAuth;\n          if (this.isAuth) { this.clear(); }\n        }),\n      this.store.select('auth')\n        .pipe(map(state => state.authError))\n        .subscribe(err => {\n          this.hasError = !!err;\n          if (this.hasError) { this.presentAlert(err.header, err.message); }\n        }),\n      this.store.select('auth')\n        .pipe(map(state => state.loading))\n        .subscribe(loading => {\n          this.isLoading = loading;\n          if (this.isLoading) { this.presentLoading(); }\n        })\n    );\n  }\n\n  ngOnDestroy() { this.subs.unsubscribe(); }\n\n  submit() {\n    const email = this.form.value.email;\n    const password = this.form.value.password;\n    if (this.isLoginMode) {\n      this.authService.login(email, password);\n    } else {\n      this.authService.signup(email, password);\n    }\n  }\n\n  toggleLogin() { this.isLoginMode = !this.isLoginMode; }\n\n  clear() { this.form.reset(); }\n\n  async presentLoading() {\n    const loading = await this.loadingController.create({ duration: 2000 });\n    await loading.present();\n    const { role, data } = await loading.onDidDismiss();\n  }\n\n  async presentAlert(header: string, message: string) {\n    if (header !== 'Auto Login Failed') {\n      const alert = await this.alertController.create({\n        header,\n        message,\n        buttons: [\n          {\n            text: 'Ok',\n            handler: () => { this.authService.clearError(); }\n          }\n        ]\n      });\n      await alert.present();\n    }\n  }\n\n}\n"],"sourceRoot":"webpack:///","file":"auth-auth-module-es5.js"}