{"version":3,"sources":["./src/app/auth/auth.page.html","./src/app/auth/auth-routing.module.ts","./src/app/auth/auth.module.ts","./src/app/auth/auth.page.scss","./src/app/auth/auth.page.ts"],"names":[],"mappings":"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","file":"auth-auth-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Easy Books</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col size-md=\\\"4\\\" offset-md=\\\"4\\\">\\n        <div class=\\\"ion-padding\\\"></div>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col size-md=\\\"4\\\" offset-md=\\\"4\\\">\\n        <ion-card>\\n          <ion-card-header>\\n            <ion-card-title class=\\\"ion-padding\\\">\\n              {{ isLoginMode ? 'Log into your account.' : 'Register as a new user.' }}\\n            </ion-card-title>\\n          </ion-card-header>\\n\\n          <ion-card-content>\\n            <form [formGroup]=\\\"form\\\">\\n              <ion-grid>\\n                <ion-row>\\n                  <ion-col>\\n                    <ion-item>\\n                      <ion-label position=\\\"floating\\\">Email*</ion-label>\\n                      <ion-input type=\\\"email\\\" autocomplete formControlName=\\\"email\\\"></ion-input>\\n                    </ion-item>\\n                  </ion-col>\\n                </ion-row>\\n                <ion-row>\\n                  <ion-col>\\n                    <ion-item>\\n                      <ion-label position=\\\"floating\\\">Password*</ion-label>\\n                      <ion-input type=\\\"password\\\" autocomplete formControlName=\\\"password\\\"></ion-input>\\n                    </ion-item>\\n                  </ion-col>\\n                </ion-row>\\n                <ion-row>\\n                  <ion-col>\\n                    <div class=\\\"ion-padding\\\">\\n                      <ion-button (click)=\\\"submit()\\\">{{ isLoginMode ? 'Login' : 'Signup' }}</ion-button>\\n                      &nbsp;\\n                      <ion-button (click)=\\\"toggleLogin()\\\" fill=\\\"clear\\\" color=\\\"warning\\\">\\n                        {{ isLoginMode ? 'Register' : 'Sign In' }}\\n                      </ion-button>\\n                    </div>\\n                  </ion-col>\\n                </ion-row>\\n              </ion-grid>\\n            </form>\\n          </ion-card-content>\\n        </ion-card>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AuthPage } from './auth.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AuthPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AuthPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\n\nimport { AuthPageRoutingModule } from './auth-routing.module';\n\nimport { AuthPage } from './auth.page';\n\n@NgModule({\n  imports: [\n    SharedModule,\n    AuthPageRoutingModule\n  ],\n  declarations: [AuthPage]\n})\nexport class AuthPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2F1dGgvYXV0aC5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { LoadingController, AlertController } from '@ionic/angular';\nimport { map } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { SubSink } from 'subsink';\n\nimport { AppState } from '../store';\nimport { AuthService } from '../store';\n\n@Component({\n  selector: 'app-auth',\n  templateUrl: './auth.page.html',\n  styleUrls: ['./auth.page.scss'],\n})\nexport class AuthPage implements OnInit, OnDestroy {\n  private subs = new SubSink();\n  form: FormGroup;\n  isAuth: boolean;\n  hasError: boolean;\n  isLoading: boolean;\n  isLoginMode = true;\n\n  constructor(\n    private store: Store<AppState>,\n    private authService: AuthService,\n    public loadingController: LoadingController,\n    public alertController: AlertController\n  ) { }\n\n  ngOnInit() {\n    this.form = new FormGroup({\n      email: new FormControl(null, {\n        updateOn: 'blur',\n        validators: [\n          Validators.required,\n          Validators.email\n        ]\n      }),\n      password: new FormControl(null, {\n        updateOn: 'blur',\n        validators: [\n          Validators.required,\n          Validators.minLength(6)\n        ]\n      })\n    });\n\n    this.subs.add(\n      this.store.select('auth')\n        .pipe(map(state => this.isAuth = state.isAuth))\n        .subscribe(isAuth => {\n          this.isAuth = isAuth;\n          if (this.isAuth) { this.clear(); }\n        }),\n      this.store.select('auth')\n        .pipe(map(state => state.authError))\n        .subscribe(err => {\n          this.hasError = !!err;\n          if (this.hasError) { this.presentAlert(err.header, err.message); }\n        }),\n      this.store.select('auth')\n        .pipe(map(state => state.loading))\n        .subscribe(loading => {\n          this.isLoading = loading;\n          if (this.isLoading) { this.presentLoading(); }\n        })\n    );\n  }\n\n  ngOnDestroy() { this.subs.unsubscribe(); }\n\n  submit() {\n    const email = this.form.value.email;\n    const password = this.form.value.password;\n    if (this.isLoginMode) {\n      this.authService.login(email, password);\n    } else {\n      this.authService.signup(email, password);\n    }\n  }\n\n  toggleLogin() { this.isLoginMode = !this.isLoginMode; }\n\n  clear() { this.form.reset(); }\n\n  async presentLoading() {\n    const loading = await this.loadingController.create({ duration: 2000 });\n    await loading.present();\n    const { role, data } = await loading.onDidDismiss();\n  }\n\n  async presentAlert(header: string, message: string) {\n    if (header !== 'Auto Login Failed') {\n      const alert = await this.alertController.create({\n        header,\n        message,\n        buttons: [\n          {\n            text: 'Ok',\n            handler: () => { this.authService.clearError(); }\n          }\n        ]\n      });\n      await alert.present();\n    }\n  }\n\n}\n"],"sourceRoot":"webpack:///"}